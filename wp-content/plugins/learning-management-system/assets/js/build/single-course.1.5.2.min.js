function masteriyo_select_single_course_page_tab(e,t){jQuery(".masteriyo-tab").removeClass("active-tab"),jQuery(".tab-content").addClass("masteriyo-hidden"),jQuery(e.target).addClass("active-tab"),jQuery(t).removeClass("masteriyo-hidden")}!function(l,c){var a=function(e,t){e=c.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;t.force_delete?e+="?force_delete=true":e+="?force_delete=false",l.ajax({type:"delete",headers:{"X-WP-Nonce":c.nonce},url:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},o=function(e,t){var i=c.rootApiUrl+"masteriyo/v1/courses/reviews";l.ajax({type:"post",headers:{"X-WP-Nonce":c.nonce},url:i,data:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},s=function(e,t,i){e=c.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;l.ajax({type:"put",headers:{"X-WP-Nonce":c.nonce},url:e,data:t,success:i.onSuccess,error:i.onError,complete:i.onComplete})},m=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-danger-msg"><span>'+e+"</span></div>"},d=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-success-msg"><span>'+e+"</span></div>"},u=function(e){e.find(".masteriyo-notify-message").remove()},f=function(e){for(e=""===e?0:e,e=parseFloat(e),html="",max_rating=c.max_course_rating,e=(e=e>max_rating?max_rating:e)<0?0:e,stars=c.rating_indicator_markup,rating_floor=Math.floor(e),i=1;i<=rating_floor;i++)html+=stars.full_star;for(rating_floor<e&&(html+=stars.half_star),rating_ceil=Math.ceil(e),i=rating_ceil;i<max_rating;i++)html+=stars.empty_star;return html},v=function(t={}){l(document.body).append(l(".masteriyo-confirm-delete-course-review-modal-content").html()),l(".masteriyo-modal-confirm-delete-course-review .masteriyo-cancel").on("click",function(){l(this).closest(".masteriyo-overlay").remove()}),l(".masteriyo-modal-confirm-delete-course-review .masteriyo-delete").on("click",function(){var e=l(this).closest(".masteriyo-overlay");e.find(".masteriyo-cancel").attr("disabled",!0),l(this).text(c.labels.deleting),"function"==typeof t.onConfirm&&t.onConfirm(function(){e.remove()})})},p={$create_review_form:l(".masteriyo-submit-review-form"),create_review_form_class:".masteriyo-submit-review-form",init:function(){l(document).ready(function(){p.init_sticky_sidebar(),p.init_rating_widget(),p.init_course_reviews_menu(),p.init_faqs_accordions_handler(),p.init_curriculum_accordions_handler(),p.init_create_reviews_handler(),p.init_edit_reviews_handler(),p.init_delete_reviews_handler(),p.init_reply_btn_handler()})},init_course_reviews_menu:function(){l(document.body).on("click",".menu-toggler",function(){return 0==l(this).siblings(".menu").height()?(l(this).siblings(".menu").height("auto"),void l(this).siblings(".menu").css("max-height","999px")):void l(this).siblings(".menu").height(0)}),l(".masteriyo-dropdown .menu li").on("click",function(){l(this).closest(".menu").height(0)}),l(document.body).click(function(e){0<l(".masteriyo-dropdown").has(e.target).length||l(".masteriyo-dropdown .menu").height(0)})},init_rating_widget:function(){var i=!1,n=null;p.$create_review_form.on("mouseover",function(e){e=l(e.target).closest(".masteriyo-rating-input-icon");if(0===e.length){if(i)return;var t=p.$create_review_form.find('input[name="rating"]').val();return p.$create_review_form.find(".masteriyo-rstar").html(f(t)),i=!0,void(n=null)}t=e.index()+1,e=e.closest(".masteriyo-rstar");i=!1,n!==t&&(n=t,e.html(f(t)),e.find(".masteriyo-rating-input-icon").on("click",function(){var e=l(this).index()+1;p.$create_review_form.find('input[name="rating"]').val(e),l(this).closest(".masteriyo-rstar").html(f(e))}))})},init_create_reviews_handler:function(){var t=!1;p.$create_review_form.on("submit",function(e){e.preventDefault();var n=p.$create_review_form,r=n.find('button[type="submit"]'),e={title:n.find('input[name="title"]').val(),rating:n.find('input[name="rating"]').val(),content:n.find('[name="content"]').val(),parent:n.find('[name="parent"]').val(),course_id:n.find('[name="course_id"]').val()};t||"yes"===n.data("edit-mode")||(t=!0,r.text(c.labels.submitting),u(n),o(e,{onSuccess:function(){n.append(d(c.labels.submit_success)),n.trigger("reset"),window.location.reload()},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),n.append(m(i)),r.text(c.labels.submit)},onComplete:function(){t=!1}}))})},init_reply_btn_handler:function(){l(document.body).on("click",".masteriyo-reply-course-review",function(e){e.preventDefault();var t=p.$create_review_form,i=l(this).closest(".masteriyo-course-review"),n=i.data("id"),e=t.find('button[type="submit"]'),i=i.find(".title").data("value");t.find('input[name="title"]').val(""),t.find('input[name="rating"]').val(0),t.find(".masteriyo-rstar").html(f(0)),t.find('[name="content"]').val(""),t.find('[name="parent"]').val(n),e.text(c.labels.submit),l(".masteriyo-form-title").text(c.labels.reply_to+": "+i),t.find(".masteriyo-title, .masteriyo-rating").hide(),t.find('[name="content"]').focus(),l("html, body").animate({scrollTop:t.offset().top},500)})},init_edit_reviews_handler:function(){l(document.body).on("click",".masteriyo-edit-course-review",function(e){e.preventDefault();var t=p.$create_review_form,i=l(this).closest(".masteriyo-course-review"),n=i.data("id"),r=t.find('button[type="submit"]'),o=i.find(".title").data("value"),a=i.find(".rating").data("value"),s=i.find(".content").data("value"),e=i.find('[name="parent"]').val();t.data("edit-mode","yes"),t.data("review-id",n),t.find('input[name="title"]').val(o),t.find('input[name="rating"]').val(a),t.find(".masteriyo-rstar").html(f(a)),t.find('[name="content"]').val(s),t.find('[name="parent"]').val(e),r.text(c.labels.update),i.is(".is-course-review-reply")?(l(".masteriyo-form-title").text(c.labels.edit_reply),t.find(".masteriyo-title, .masteriyo-rating").hide(),t.find('[name="content"]').focus()):(l(".masteriyo-form-title").text(c.labels.edit_review+": "+o),t.find(".masteriyo-title, .masteriyo-rating").show(),t.find('input[name="title"]').focus()),l("html, body").animate({scrollTop:t.offset().top},500)});var i=!1;p.$create_review_form.on("submit",function(e){e.preventDefault();var n=p.$create_review_form,t=n.data("review-id"),r=n.find('button[type="submit"]'),e={title:n.find('input[name="title"]').val(),rating:n.find('input[name="rating"]').val(),content:n.find('[name="content"]').val(),parent:n.find('[name="parent"]').val(),course_id:n.find('[name="course_id"]').val()};i||"yes"!==n.data("edit-mode")||(i=!0,r.text(c.labels.submitting),u(n),s(t,e,{onSuccess:function(){n.append(d(c.labels.update_success)),r.text(c.labels.update),n.trigger("reset"),window.location.reload()},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),n.append(m(i)),r.text(c.labels.update)},onComplete:function(){i=!1}}))})},init_delete_reviews_handler:function(){var o={};l(document.body).on("click",".masteriyo-delete-course-review",function(e){e.preventDefault();var n=l(this).closest(".masteriyo-course-review"),r=l(this),t=n.data("id"),i=l("[name=parent][value="+t+"]");o[t]||v({onConfirm:function(e){o[t]=!0,a(t,{force_delete:0===i.length,onSuccess:function(){if(n.hasClass("is-course-review-reply")){var e=0===n.siblings().length,t=n.closest(".masteriyo-course-review-replies").prev();return e&&t.hasClass("masteriyo-delete-review-notice")&&t.fadeOut(500,function(){l(this).remove()}),void n.fadeOut(500,function(){e&&n.closest(".masteriyo-course-review-replies").remove(),l(this).remove()})}n.next().hasClass("masteriyo-course-review-replies")&&n.after(c.review_deleted_notice),n.remove()},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),n.append(m(i)),r.find(".text").text(c.labels.delete)},onComplete:function(){o[t]=!1,e()}})}})})},init_sticky_sidebar:function(){var n=l(".masteriyo-single-course--main").get(0);n&&l(window).scroll(function(){var e=l(window).scrollTop(),t=n.offsetTop,i=t+n.offsetHeight;(t<e&&e<i?!0:!1)?l(".masteriyo-single-course--aside").css({position:"sticky",top:"7.5rem"}):l(".masteriyo-single-course--aside").css({position:"relative",top:"0"})})},init_faqs_accordions_handler:function(){l(document.body).on("click",".masteriyo-faq--item-header",function(){l(this).siblings(".masteriyo-faq--item-body").first().slideToggle("swing")})},init_curriculum_accordions_handler:function(){l(document.body).on("click",".masteriyo-cheader",function(){l(this).parent(".masteriyo-stab--citems").toggleClass("active"),l(".masteriyo-stab--citems").length===l(".masteriyo-stab--citems.active").length&&t(),l(".masteriyo-stab--citems").length===l(".masteriyo-stab--citems").not(".active").length&&i()});var e=!0;function t(){l(".masteriyo-stab--citems").addClass("active"),l(".masteriyo-expand-collape-all").text("Collapse All"),e=!1}function i(){l(".masteriyo-stab--citems").removeClass("active"),l(".masteriyo-expand-collape-all").text("Expand All"),e=!0}l(document.body).on("click",".masteriyo-expand-collape-all",function(){(e?t:i)()})}};p.init()}(jQuery,window.masteriyo_data);